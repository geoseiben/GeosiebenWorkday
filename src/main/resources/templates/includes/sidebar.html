<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" >
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compact Premium Sidebar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap');

        body { font-family: 'Plus Jakarta Sans', sans-serif; }

    </style>
</head>
<body class="bg-[#fafafa] flex h-screen overflow-hidden text-slate-600">

<!-- Sidebar Container -->
<aside th:fragment="sidebar"
       onmouseenter="expandSidebar()"
       onmouseleave="collapseSidebar()"
       class="sidebar-transition w-16 bg-white border-r border-slate-200/60 flex flex-col shadow-[1px_0_10px_rgba(0,0,0,0.02)] z-50 sidebar-collapsed">

    <!-- Logo Section -->
    <div class="p-4 flex items-center h-20 shrink-0 logo-container transition-all duration-300">
        <div class="bg-indigo-600 min-w-[36px] h-9 rounded-lg flex items-center justify-center shadow-lg shadow-indigo-100 transition-all duration-300">
            <i class="fas fa-cube text-white text-sm"></i>
        </div>
        <span class="hidden-text ml-3 text-base font-bold text-slate-800 tracking-tight">CoreOS</span>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 overflow-y-auto px-3 py-4 space-y-1.5 custom-scrollbar overflow-x-hidden">

        <!-- Dashboard -->
        <a href="#" class="nav-item flex items-center gap-3 p-2.5 rounded-lg transition-all duration-200 hover:bg-slate-50 group sidebar-item-active">
            <i class="fas fa-home-alt w-5 text-center text-indigo-600"></i>
            <span class="hidden-text font-medium text-sm">Overview</span>
        </a>

        <!-- Dropdown: Projects -->
        <div class="dropdown-item">
            <button onclick="toggleDropdown(this)" class="nav-item w-full flex items-center justify-between p-2.5 rounded-lg transition-all duration-200 hover:bg-slate-50 group">
                <div class="flex items-center gap-3">
                    <i class="fas fa-folder-open w-5 text-center text-slate-400 group-hover:text-slate-600 transition-colors"></i>
                    <span class="hidden-text font-medium text-sm text-slate-600">Projects</span>
                </div>
                <i class="fas fa-chevron-down text-[10px] chevron-icon transition-transform duration-200 hidden-text text-slate-300"></i>
            </button>
            <div class="dropdown-content space-y-1">
                <a href="#" class="block py-1.5 px-9 text-xs text-slate-500 hover:text-indigo-600 transition-colors">Client Work</a>
                <a href="#" class="block py-1.5 px-9 text-xs text-slate-500 hover:text-indigo-600 transition-colors">Internal</a>
            </div>
        </div>

        <!-- Dropdown: CRM -->
        <div class="dropdown-item">
            <button onclick="toggleDropdown(this)" class="nav-item w-full flex items-center justify-between p-2.5 rounded-lg transition-all duration-200 hover:bg-slate-50 group">
                <div class="flex items-center gap-3">
                    <i class="fas fa-user-friends w-5 text-center text-slate-400 group-hover:text-slate-600 transition-colors"></i>
                    <span class="hidden-text font-medium text-sm text-slate-600">Customers</span>
                </div>
                <i class="fas fa-chevron-down text-[10px] chevron-icon transition-transform duration-200 hidden-text text-slate-300"></i>
            </button>
            <div class="dropdown-content space-y-1">
                <a href="#" class="block py-1.5 px-9 text-xs text-slate-500 hover:text-indigo-600 transition-colors">Active Users</a>
                <a href="#" class="block py-1.5 px-9 text-xs text-slate-500 hover:text-indigo-600 transition-colors">Lead Gen</a>
            </div>
        </div>

        <!-- Mail -->
        <a href="#" class="nav-item flex items-center justify-between p-2.5 rounded-lg transition-all duration-200 hover:bg-slate-50 group">
            <div class="flex items-center gap-3">
                <i class="fas fa-paper-plane w-5 text-center text-slate-400 group-hover:text-slate-600 transition-colors"></i>
                <span class="hidden-text font-medium text-sm text-slate-600">Campaigns</span>
            </div>
            <div class="hidden-text px-1.5 py-0.5 rounded-md bg-rose-50 text-rose-500 text-[10px] font-bold">Hot</div>
        </a>
    </nav>

    <!-- Profile Section -->
    <div class="p-3 border-t border-slate-100 shrink-0">
        <div class="flex items-center gap-3 p-1.5 rounded-lg hover:bg-slate-50 cursor-pointer transition-all duration-200 group">
            <div class="relative shrink-0 flex items-center justify-center">
                <img src="https://ui-avatars.com/api/?name=Alex+Rivera&background=6366f1&color=fff"
                     alt="Avatar"
                     class="w-8 h-8 rounded-lg object-cover ring-2 ring-transparent group-hover:ring-indigo-100 transition-all">
            </div>
            <div class="hidden-text flex-1 overflow-hidden">
                <p class="text-[13px] font-semibold text-slate-800 truncate leading-none mb-1">Alex Rivera</p>
                <p class="text-[10px] text-slate-400 font-medium truncate">alex.rivera@inc.com</p>
            </div>
        </div>
    </div>
</aside>

<script>
    const sidebar = document.getElementById('sidebar');

    function expandSidebar() {
        sidebar.classList.remove('w-16', 'sidebar-collapsed');
        sidebar.classList.add('w-64', 'sidebar-expanded');
    }

    function collapseSidebar() {
        sidebar.classList.remove('w-64', 'sidebar-expanded');
        sidebar.classList.add('w-16', 'sidebar-collapsed');

        // Auto-close dropdowns on collapse
        document.querySelectorAll('.dropdown-item').forEach(d => {
            d.classList.remove('dropdown-open');
        });
    }

    function toggleDropdown(button) {
        const parent = button.parentElement;

        // Expand sidebar if it was collapsed when clicking dropdown
        if (sidebar.classList.contains('sidebar-collapsed')) {
            expandSidebar();
            // Add a small delay so user sees the dropdown open after expansion
            setTimeout(() => parent.classList.add('dropdown-open'), 100);
        } else {
            parent.classList.toggle('dropdown-open');
        }
    }
</script>
</body>
</html>